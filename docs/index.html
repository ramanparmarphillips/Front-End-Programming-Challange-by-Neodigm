<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Page info -->
    <title>Front End Development Challenge by Neodigm</title>
    <link rel='shortcut icon' href='favicon.ico' type='image/x-icon'>

    <!-- Meta data -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <!-- Font imports -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet">
    <script src='https://kit.fontawesome.com/5931611d04.js' crossorigin='anonymous'></script>
    
    <!-- SEO -->
    <meta name="description" content="This is the code of a coding challenge created by Neodigm.">
    <meta name="keywords" content="coding challenge, front-end development, accessibility">
    <meta name="author" content="Neodigm">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://ramanparmarphillips.github.io/Front-End-Programming-Challange-by-Neodigm">
    
    <meta property="og:url" content="https://ramanparmarphillips.github.io/Front-End-Programming-Challange-by-Neodigm">
    <meta property="og:title" content="Front End Development Challenge">
    <meta property="og:description" content="This is the code of a coding challenge created by Neodigm.">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Front End Development Challenge by Neodigm">
    <meta name="twitter:description" content="This is the code of a coding challenge created by Neodigm.">
    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebSite",
            "url": "https://example.com",
            "name": "Front End Development Challenge",
            "description": "This is the code of a coding challenge created by Neodigm."
        }
    </script>
    
    <!-- Mock Google analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'GA_MEASUREMENT_ID');
    </script>
    <style>
        /* ========================== */
        /*         CSS CONTENTS       */
        /* ========================== */
        /* 1. GENERAL                 */
        /* 2. SCROLLBAR               */
        /* 3. HEADER                  */
        /* 4. PRODUCT SECTIONS        */
        /* 5. COLLAPSIBLE MENU HEADER */
        /* 6. FOOTER                  */
        /* 7. MEDIA QUERIES           */
        /* ========================== */


        /* ========== */
        /* 1. GENERAL */
        /* ========== */
        * {
            font-family: 'Noto Sans', sans-serif;
        }

        body {
            margin: 0;
            padding: 0;
            overflow-y: scroll;
            overflow-x: hidden;
        }

        main {
            margin-bottom: 50px;
        }
        /* ======= */




        /* ============ */
        /* 2. SCROLLBAR */
        /* ============ */

        body::-webkit-scrollbar-track
        {

            border-radius: 10px;
            background-color: #F5F5F5;
        }

        body::-webkit-scrollbar
        {
            width: 6px;
            background-color: #F5F5F5;
        }

        body::-webkit-scrollbar-thumb
        {
            border-radius: 10px;
            -webkit-box-shadow: inset 0 0 3px rgba(0,0,0,.3);
            background-color: #8569bb;
        }
        /* ========= */





        /* ========= */
        /* 3. HEADER */
        /* ========= */

        header {
            width: 100%;;
            background-color: #f1f1f1;
            padding: 20px;
        }
        .intro {
            padding: 0;
            width: 50%;
            margin: auto auto;
            text-align: justify;
        }
        /* ========= */




        /* =================== */
        /* 4. PRODUCT SECTIONS */
        /* =================== */

        #product-menu {
            font-family: 'Lobster', cursive;
            font-size: 3rem;
            color: #3f3f3f;
        }

        .product--section {
            padding: 20px 20px;
        }

        .content {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            grid-gap: 1rem;
            display: none;
            padding: 20px 20px;
            justify-items: center;

        }    
            
        .card {
            width: 160px;
            height: 200px;
            border-radius: 20px;
            background: #f5f5f5;
            position: relative;
            border: 2px solid #c3c6ce;
            transition: 0.5s ease-out;
            overflow: visible;
        }

        /* INSIDE OF PRODUCT CARD */
        .card-details {
            border-radius: 20px;
            height: 100%;
            width: 100%;
            gap: .5em;
            display: grid;
            place-content: center;
            text-align: center;
        }

        .product__title {
            position: absolute;
            font-size: 1.3rem;
            font-weight: 600;
            cursor: pointer;
            color: #000;
            text-decoration: none ;
            top: 7%;
            right: 50%;
            transform: translateX(50%);
            width: 100%;
            text-align: center;
        }

        /* SALE PRICE ELEMENT */
        .card-button {
            transform: translate(-50%, 100%);
            width: 60%;
            border-radius: 1rem;
            border: none;
            background-color: #008bf8;
            color: #fff;
            font-size: .75rem;
            padding: .5rem 1rem;
            position: absolute;
            left: 50%;
            bottom: 0;
            opacity: 0;
            transition: 0.3s ease-out;
            z-index: 10;
        }

        .product__price {
            position: absolute;
            bottom: 25%;
            right: 50%;
            transform: translateX(50%);
            color: rgb(134, 134, 134);
        }

        /* HOVER/FOCUS/ACTIVE */
        .card:hover {
            border-color: #008bf8;
            box-shadow: 0 4px 18px 0 rgba(0, 0, 0, 0.25);   
        }
        .product__title:focus ~ .card-button {
            transform: translate(-50%, 50%);
            opacity: 1;
        }
        .product__title:focus ~ .text-body {
            text-decoration: line-through;
        }
        .product__title:hover ~ .text-body {
            text-decoration: line-through;
        }
        .product__title:hover ~ .card-button {
            transform: translate(-50%, 50%);
            opacity: 1;
        }

        /* LIKE BUTTON */
        .like__button {
            width: max-content;
            position : absolute;
            z-index: 10; 
            bottom: 20%;
            right: 50%;
            transform: translateX(50%);
            border: none;
            background: transparent;
        }

        .likeIcon {
            padding: 0.5rem;
            border-radius: 50%;
            background: #fff;
            z-index: 10;
            width: max-content;
            cursor: pointer;
            box-shadow: 0 0 0.5rem rgba(0, 0, 0, 0.2);
            border-radius: 50%;
        }

        .likeIcon:hover {
            background: #e2e0e0;
        }

        .liked {
            color: red;
        }
        /* ================ */



        /* =========================== */
        /* 5. COLLAPSIBLE MENU HEADER  */
        /* =========================== */

        .collapsible {
            background-color: #80a2ec;
            color: white;
            cursor: pointer;
            padding: 18px;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 15px;
            transition: .5s;
            margin-bottom: 5px;
            font-weight: 400;
            font-size: 1.1rem;
        }

        .collapsible:focus {
            background: #6278a8
        }

        .menu--icon {
            transform: translateY(1px);
            transition: .5s;
            margin-right: 5px;
        }

        .collapsible.active .menu--icon {
            transform: rotate(180deg) translateY(-1px);
            transition: .5s;
        }

        .collapsible.active {
            border-radius: 10px;
            background-color: #4a5b81;
        }

        .collapsible:hover {
            background-color: #6278a8;
        }
        /* ======================== */


        /* ========= */
        /* 6. FOOTER */
        /* ========= */
        footer {
            position: fixed;
            bottom: 0;
            margin-top: 50px;
            background-color: #d6d6d6;
            text-align: center;
            font-weight: 400;
            font-size: 1.1rem;
            width: 100%;
            color: #000;
            z-index: 11;
        }

        /* ========= */


        /* ================ */
        /* 7. MEDIA QUERIES */
        /* ================ */

        @media screen and (max-width: 768px) {
            .content {
                grid-template-columns: repeat(2, 1fr);
                justify-items: center;
            }
        }

        @media screen and (min-width: 768px) and (max-width: 1400px) {
            .content {
                grid-template-columns: repeat(4, 1fr);
            }
        }
        /* ============= */
    </style>
</head>
<body>
    <header role="banner" aria-label="Intro Section">
        <p class="intro">This is the result of a coding challenge created by <a href="https://github.com/neodigm" target="_blank">Neodigm</a>. The requirements for the challenge can be found <a href="https://github.com/neodigm/FED_Programming_Challenge/blob/gh-pages/Advanced_FED_Programming_Challenge.pdf" target="_blank">here.</a>
            It covers API's, from which it populates the page and its contents dynamically, responsiveness, DOM manipulation, storing local storage for persistence between sessions, SEO, Google analytics, and accessibility for those using screen readers and keyboard is navigable. The final code for it can be found <a href="https://github.com/ramanparmarphillips/Front-End-Programming-Challange-by-Neodigm" target="_blank">here!</a></p>
    </header>
    <main>
        <section role="region" aria-labelledby="product-menu" class='product--section'> 
            <h2 id="product-menu">Product menu</h2>
                <nav role="navigation">
                    <button type="button" class="collapsible" tabindex="0"><i class="fa-solid fa-caret-down menu--icon"></i>Mask & Wellness</button>
                    <div id="mask--wellness" class="product--container content">
                    </div>
                    <button type="button" class="collapsible" tabindex="0"><i class="fa-solid fa-caret-down menu--icon"></i>Matches </button>
                    <div id="matches" class="product--container content">
                    </div>
                    <button type="button" class="collapsible" tabindex="0"><i class="fa-solid fa-caret-down menu--icon"></i>Invitations </button>
                    <div id="invitations" class="product--container content">
                    </div>
                    <button type="button" class="collapsible" tabindex="0"><i class="fa-solid fa-caret-down menu--icon"></i>Barware</button>
                    <div id="barware" class="product--container content">
                    </div>
                    <button type="button" class="collapsible" tabindex="0"><i class="fa-solid fa-caret-down menu--icon"></i>Cups & Plates</button>
                    <div id="cups--plates" class="product--container content">
                    </div>
                    <button type="button" class="collapsible" tabindex="0"><i class="fa-solid fa-caret-down menu--icon"></i>Gifts</button>
                    <div id="gifts" class="product--container content">
                    </div>
                    <button type="button" class="collapsible" tabindex="0"><i class="fa-solid fa-caret-down menu--icon"></i>Bags, Tags & Favours </button>
                    <div id="bags-tags--favours" class="product--container content">
                    </div>
                    <button type="button" class="collapsible" tabindex="0"><i class="fa-solid fa-caret-down menu--icon"></i>Napkins</button>
                    <div id="napkins" class="product--container content">
                    </div>
                </nav>
        </section>
    </main>
    <footer role="contentinfo">
        <p><a href="https://github.com/neodigm/FED_Programming_Challenge/blob/gh-pages/LICENSE">© Copyright Notice</a></p>

    </footer>
    
    <script>
        //=================
        //ELEMENT SELECTORS
        //=================
        const prodCatMasks   = document.getElementById('mask--wellness')
        const prodCatMatches = document.getElementById('matches')
        const prodCatInvite  = document.getElementById('invitations')
        const prodCatBar     = document.getElementById('barware')
        const prodCatCups    = document.getElementById('cups--plates')
        const prodCatGifts   = document.getElementById('gifts')
        const prodCatBags    = document.getElementById('bags-tags--favours')
        const prodCatNapkins = document.getElementById('napkins')
        const productSection = document.getElementById('product__section')
        const collapsible    = document.querySelectorAll(".collapsible")



        //=================================================================  
        //FETCHES API DATA AND CREATES ELEMENTS AND APPENDS THEM TO THE DOM
        //=================================================================  
        async function getAPI() {
        const response = await fetch('https://neodigm.github.io/FED_Programming_Challenge/products.json')
        const data = await response.json()
        
        data.forEach((item, i)  => {
            //================
            //ELEMENT CREATION
            //================

            //PRODUCT CARD
            const addDiv = document.createElement('div')
            addDiv.classList.add('product--card--light', 'card')

            //PRODUCT CATEGORY
            addDiv.dataset.productCategory = item.cat

            //CARD DETAILS
            const insideDiv = document.createElement('div')
            insideDiv.classList.add('card-details')

            //PRODUCT TITLE
            const addProductTitle = document.createElement('a')
            addProductTitle.classList.add('product__title', 'text-title')
            addProductTitle.innerHTML = `${item.product}`
            addProductTitle.setAttribute('href', '#')
            
            //PRICE
            const addProductPrice = document.createElement('p')
            addProductPrice.classList.add('product__price', 'text-body')
            addProductPrice.innerHTML = `<p>£ ${item.price}</p>` 
            
            //SALE PRICE
            const addSalePrice = document.createElement('a')
            addSalePrice.classList.add('sale__price', 'card-button')
            //For adding a zero to the front of the price if it starts with a decimal
            const priceWithoutZero = item.sale.charAt(0)
            if (priceWithoutZero === '.') item.sale = "0" + item.sale
            addSalePrice.innerHTML = `Sale Price: £ ${item.sale}` 
            
            //LIKE BUTTON
            const addLikeButton = document.createElement('button')
            addLikeButton.classList.add('like__button')
            addLikeButton.innerHTML = '<i class="fa-solid fa-heart likeIcon"></i>'

            //PRODUCT NUMBER
            const productNumber = addDiv.dataset.productNumber = i
            const productId = `product${productNumber}` // assuming each item has a unique id
            
            //APPEND ELEMENTS PRODUCT CARD
            insideDiv.appendChild(addProductTitle)
            insideDiv.appendChild(addProductPrice)
            insideDiv.appendChild(addSalePrice)
            insideDiv.appendChild(addLikeButton)
            addDiv.appendChild(insideDiv)

            //APPEND ELEMENTS TO PRODUCT CATEGORY
            if (addDiv.dataset.productCategory === 'masks + wellness') {
            prodCatMasks.appendChild(addDiv)
            } else if (addDiv.dataset.productCategory === 'matches') {
            prodCatMatches.appendChild(addDiv)
            } else if (addDiv.dataset.productCategory === 'invitations') {
            prodCatInvite.appendChild(addDiv)
            } else if (addDiv.dataset.productCategory === 'barware') {
            prodCatBar.appendChild(addDiv)
            } else if (addDiv.dataset.productCategory === 'cups + plates') {
            prodCatCups.appendChild(addDiv)
            } else if (addDiv.dataset.productCategory === 'gifts') {
            prodCatGifts.appendChild(addDiv)
            } else if (addDiv.dataset.productCategory === 'bags, tags + favors') {
            prodCatBags.appendChild(addDiv)
            } else if (addDiv.dataset.productCategory === 'napkins') {
            prodCatNapkins.appendChild(addDiv)
            }


            addProductTitle.addEventListener('click', (e) => {
                e.preventDefault()
            })
            
            //LIKE BUTTON FUNCTIONALITY
            addLikeButton.addEventListener('click', () => {
            addLikeButton.classList.toggle('liked')
            const isLiked = addLikeButton.classList.contains('liked')

            //SETTING TO AND REMOVING FROM LOCAL STORAGE
            let likedItems = JSON.parse(localStorage.getItem('likedItems') || '[]')
            if (isLiked) {
                gtag('event', 'favorite_product', {'product_id': productId});
                likedItems.push(productId)
                localStorage.setItem('likedItems', JSON.stringify(likedItems))
            } else {
                likedItems = likedItems.filter(id => id !== productId)
                localStorage.setItem('likedItems', JSON.stringify(likedItems))
            }
            })
                
            // CHECK IF ITEM IS ALREADY LIKED FOR PERSISTENCE
            let likedItems = JSON.parse(localStorage.getItem('likedItems') || '[]')
            if (likedItems.includes(productId)) {
                addLikeButton.classList.add('liked')
            }
            })
        }


        //=====================================
        //COLLAPSIBLE MENU HEADER FUNCTIONALITY
        //=====================================
        collapsible.forEach((item) => {
        item.addEventListener('click', () => {
            item.classList.toggle('active')
            let content = item.nextElementSibling  
            if (content.style.display === "grid") {
            content.style.display = "none"
            } else {
            content.style.display = "grid"
            }
        })
        })
        getAPI()
    </script>
</body>
</html>